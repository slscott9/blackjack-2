<div>
    <app-nav-bar></app-nav-bar>

    <div class="row">
        <div class="col-4">
            <form [formGroup]="gameModeForm">
                <label>Practice mode</label>
                <select class="form-select" aria-label="Default select example" formControlName="mode">
                    <option selected>All cards</option>
                    <option value="1">Soft totals</option>
                    <option value="2">Pair splitting</option>
                </select>

                <button class="mt-3 btn btn-primary" type="submit" (click)="setGame()">Submit</button>
            </form>
        </div>
    </div>


    <div *ngIf="gameStarted === true">
        <!--Dealer cards-->
        <div class="row">
            <div class="col">
                <div class="row d-flex justify-content-center">
                    <div class="col-2 d-flex justify-content-center" *ngFor="let card of dealerCards; let i = index;">
                        <img src="{{card.imgSrc}}" [ngClass]="{'right-transition' : i === dealerCards.length -1}">
                    </div>
                </div>
            </div>
        </div>

        <!--Player cards-->
        <div>
            <div class="mt-5 row">
                <div class="col">
                    <div *ngIf="isSplit === false">
                        <div class="row d-flex justify-content-center">
                            <div class="col-2 d-flex justify-content-center" *ngFor="let card of playerCards; let i = index;">
                                <img src="{{card.imgSrc}}"
                                    [ngClass]="{'right-transition' : i === playerCards.length -1}">
                            </div>
                        </div>
                    </div>

                    <div class="" *ngIf="isSplit === true">
                        <div class="row">
                            <div class="col">
                                <div class="row d-flex justify-content-center">
                                    <div class="col-2" *ngFor="let card of playerCardsSplit1; let i = index;">
                                        <img src="{{card.imgSrc}}"
                                            [ngClass]="{'right-transition' : i === playerCardsSplit1.length -1}">
                                    </div>
                                </div>
                                <div class="row mt-3 d-flex justify-content-center" *ngIf="staySplit1 === false && staySplit2 === true">
                                    <div class="col-1 d-flex justify-content-center">
                                        <button class="btn btn-primary" (click)="addSplit1()">Hit</button>
                                    </div>
                                    <div class="col-1 d-flex justify-content-center">
                                        <button class="btn btn-primary" (click)="staySplit('one')">Stay</button>
                                    </div>
                                </div>
                            </div>
                            <div class="col">

                                <div class="row d-flex justify-content-center">
                                    <div class="col-2" *ngFor="let card of playerCardsSplit2; let i = index;">
                                        <img src="{{card.imgSrc}}"
                                            [ngClass]="{'right-transition' : i === playerCardsSplit2.length -1}">
                                    </div>
                                </div>
                                <div class="row mt-3 d-flex justify-content-center" *ngIf="staySplit2 === false">
                                    <div class="col-1 d-flex justify-content-center">
                                        <button class="btn btn-primary" (click)="addSplit2()">Hit</button>
                                    </div>
                                    <div class="col-1 d-flex justify-content-center">
                                        <button class="btn btn-primary" (click)="staySplit('two')">Stay</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row mt-5 d-flex justify-content-center" *ngIf="isSplit === false">
                <div class="col-1 d-flex justify-content-center">
                    <button class="btn btn-primary" (click)="split()">Split</button>
                </div>
                <div class="col-1 d-flex justify-content-center">
                    <button class="btn btn-primary" (click)="addPlayerCard(1)">Hit</button>
                </div>
                <div class="col-1 d-flex justify-content-center">
                    <button class="btn btn-primary" (click)="addDealerCard()">Stay</button>
                </div>
                <div class="col-1 d-flex justify-content-center">
                    <button class="btn btn-primary" (click)="perfectStrategy()">Perfect Strategy</button>
                </div>
                <div class="col-1 d-flex justify-content-center" *ngIf="perfectStrategyMessage !== ''">
                    {{perfectStrategyMessage}}
                </div>

                <div class="col-1 d-flex justify-content-center">
                    <button class="btn btn-primary" (click)="showCount()">Show card count</button>
                </div>
                <div class="col-1 d-flex justify-content-center" *ngIf="showCardCount === true">
                    {{calculateCount()}}
                </div>
            </div>
        </div>
    </div>
</div>